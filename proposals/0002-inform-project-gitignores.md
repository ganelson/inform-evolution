# (IE-0002) Automatic gitignores for Inform projects

* Proposal: [IE-0002](0002-inform-project-gitignores.md)
* Discussion PR link: [#2](https://github.com/ganelson/inform-evolution/pull/2)
* Authors: Graham Nelson
* Status: Accepted
* Related proposals: None
* Implementation: Implemented but unreleased

## Summary

An automated convenience for Inform users placing projects under source
control with git in its various guises.

## Motivation

Inform projects as they stand can be annoying to put under source control.

Both the project folder and the materials folder contain a mixture of things
which must be kept permanently (the source text, pictures used, the IFID, and
such) and ephemera which should be regenerated as needed (binaries as built,
index HTML files, released websites).

In the `git` version control system, the proper way to handle this to write
a `.gitignore` file specifying what can be ignored. But such files are a
nuisance to deal with (on MacOS, for example, they are hidden in the Finder)
and users may not be clear on exactly what is and is not to be ignored,
out of the soup of files in a complex Inform project.

The idea is for Inform to construct the necessary `.gitignore` itself, in
a silently helpful way.

## Components affected

- [ ] No change to the natural-language syntax.
- [ ] No change to inbuild.
- [x] Minor changes to inform7.
- [ ] No change to inter.
- [ ] No change to the Inter specification.
- [ ] No change to runtime kits.
- [ ] No changes to the Standard Rules and Basic Inform.
- [ ] No change to documentation.
- [ ] No change to the GUI apps.

## Impact on existing projects

None, except perhaps to amend any existing `.gitignore` files in a non-destructive
way when first used.

## Proposed changes

1. Each time inform7 works on a project, it writes or updates a `.gitignore`
file in each of the project and materials directories. This ignores all
ephemeral build or release files generated by Inform.

2. Specifically, it looks for a "stanza" in the form of a run of lines
in the form:
```
	# This stanza written automatically by inform7
	...
	# End of stanza written automatically by inform7
```
If it finds this stanza, it rewrites with a current version. If it does not find
this stanza, it adds it to the bottom of the `.gitignore` file; if there is no
`.gitignore` file at present, it creates one, with this stanza as the only content.

Since this happens on every run, any project the user places under source control
which has been compiled even once will be covered by this.

3. If instead inform7 finds the comment line:
```
	# No stanza written automatically by inform7
```
then it does nothing to the `.gitignore` file, and then effectively this feature
does not exist for the project.

4. The intention is for the stanza to use wildcards, and so on, so that its
content need not much change (if at all) as the project changes.
